# Production mode overrides
services:
  tt_studio_backend:
    container_name: tt_studio_backend_api_prod
    image: ghcr.io/tenstorrent/tt-studio/backend-prod:v0.0.1
  
  tt_studio_frontend:
    container_name: tt_studio_frontend_prod
    image: ghcr.io/tenstorrent/tt-studio/frontend-prod:v1.1.0
    build:
      context: ./frontend
      dockerfile: Dockerfile.prod
      target: production
      args:
        - VITE_ENABLE_DEPLOYED=${VITE_ENABLE_DEPLOYED}
        - VITE_APP_TITLE=${VITE_APP_TITLE}
        - VITE_ENABLE_RAG_ADMIN=${VITE_ENABLE_RAG_ADMIN}
    ports:
      - "3000:80"
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:80/"]
      timeout: 30s
      interval: 10s
      retries: 3
      start_period: 60s
    # Remove runtime environment variables since they're now baked into the build
    environment: []
  
  tt_studio_agent:
    container_name: tt_studio_agent_prod
    image: ghcr.io/tenstorrent/tt-studio/agent-prod:v0.0.0
  
  tt_studio_chroma:
    container_name: tt_studio_chroma_prod 